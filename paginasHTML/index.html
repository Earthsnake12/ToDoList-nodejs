<!DOCTYPE html>

<head>
    <title>My Website</title>
    <link rel="stylesheet" type="text/css" href="estilo.css" />
    <script src="jquery-3.6.0.min.js"></script>
    <script>
        $(function () {
            $('.error').hide();
            $("#botonCargaNuevaTarea").click(function () {
                // si en un futuro tengo q validar los campos tiene que ir aca


                //revisa los campos, si alguno esta en blanco muestra mensaje de error y enfoca en ese campo
                var titulo = $("#nuevaTareaTitulo").val();
                if (titulo == "") {
                    $("#nuevaTareaTituloError").show();
                    $("#nuevaTareaTitulo").focus();
                    return false;
                }
                var descripcion = $("#nuevaTareaDescripcion").val();
                if (descripcion == "") {
                    $("#nuevaTareaDescripcionError").show();
                    $("#nuevaTareaDescripcion").focus();
                    return false;
                }
                var estado = $("#nuevaTareaEstado").val();
                if (estado == "") {
                    $("#nuevaTareaEstadoError").show();
                    $("#nuevaTareaEstado").focus();
                    return false;
                };

                //logica para enviar el formulario a /tarea para procesarlo y cargarlo
                $.ajax({
                    type: "POST",
                    url: "tarea",
                    data: { "id": 0, "titulo": titulo, "descripcion": descripcion, "estado": estado },
                    dataType: 'text',
                    success: function (msj) {
                        //alert(msj); // alerta para saber que se subio
                        $("#botonCargaNuevaTareaMsj").html(msj);
                        $("#botonCargaNuevaTareaMsj").show();
                        //agregar el recargado de la tabla
                    },
                    error: function (xhr, status) {
                        alert('Disculpe, hubo un problema');
                    },
                });
                return false; //para no actualizar la pag y manteneme aca
            });
        });
    </script>
</head>

<body>
    <nav>
        <a class="active" href="/index">Home</a>
        <a href="/uno">Uno</a>
        <a href="/dos">Dos</a>
        <a href="/tres">Tres</a>
    </nav>
    <div id="lista">
        <h1>No se pudo cargar la Tabla</h1>
    </div>

    <div id="divFormulario"></div>
    <form name="nuevaTarea" action="">
        <h1>Nueva tarea</h1>
        Titulo: <input id="nuevaTareaTitulo" name="titulo" type="text">
        <label class="error" for="nuevaTareaTitulo" id="nuevaTareaTituloError">Campo requerido</label><br>

        Descripcion: <input id="nuevaTareaDescripcion" name="descripcion" type="text">
        <label class="error" for="nuevaTareaDescripcion" id="nuevaTareaDescripcionError">Campo requerido</label><br>

        Estado: <input id="nuevaTareaEstado" name="estado" type="text">
        <label class="error" for="nuevaTareaEstado" id="nuevaTareaEstadoError">Campo requerido</label><br>

        <input id="botonCargaNuevaTarea" type="submit" value="Subir">
        <label class="error" for="botonCargaNuevaTarea" id="botonCargaNuevaTareaMsj">Tarea enviada</label>
    </form>
    </div>

</body>

</html>